System.register(["xstate","jotai"],function(w){"use strict";var l,r;return{setters:[function(o){l=o.interpret},function(o){r=o.atom}],execute:function(){w("atomWithMachine",o);function o(c,u){const f=r(null),s=r(t=>{const n=t(f);if(n)return n;let e=!0;const i=j=>{if(e)return t(j);throw new Error("get not allowed after initialization")},a=typeof c=="function"?c(i):c,x=typeof u=="function"?u(i):u;e=!1;const{guards:m,actions:d,activities:p,services:y,delays:g,...S}=x||{},T={...m&&{guards:m},...d&&{actions:d},...p&&{activities:p},...y&&{services:y},...g&&{delays:g}},M=a.withConfig(T,a.context),W=l(M,S);return{machine:M,service:W}},(t,n,e)=>{n(f,t(s))});s.onMount=t=>{t()};const v=r(null),h=r(t=>{var n;return(n=t(v))!=null?n:t(s).machine.initialState},(t,n,e)=>{const{service:i}=t(s);i.onTransition(a=>{n(v,a)}),i.start(),e(()=>{i.stop()})});return h.onMount=t=>{let n;return t(e=>{n===!1?e():n=e}),()=>{n&&n(),n=!1}},r(t=>t(h),(t,n,e)=>{const{service:i}=t(s);i.send(e)})}}}});
